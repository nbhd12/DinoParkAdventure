<%- include("../partials/head", { title: "Dino Park Adventure" }) %>

<div class="bookTickets">
  <h1>BOOK TICKETS</h1>
  <img src="/BookingPage/BookingFormImage.png" alt="dinoParkMap" class="formImage">
  <p class="exploreMapText">
    Step into a world where dinosaurs roam freely and come to life right before your eyes. Experience the thrill of encountering these magnificent creatures as you walk the trails, watch their natural behaviors, and enjoy interactive shows that bring the Jurassic era into the present day.
  </p>
</div>

<div class="booking-form-container">
  <form action="/booking/create" method="post" class="booking-form" id="bookingForm">

    <!-- First Name + Last Name -->
    <div class="contact-row">
      <div class="form-group">
        <label for="fname">First Name</label>
        <input 
          type="text" 
          id="fname" 
          placeholder="Enter your First Name" 
          name="firstName"
          value="<%= values?.firstName || '' %>"
          required />
        <% if (formErrors?.firstName) { %>
          <p class="error"><%= formErrors.firstName %></p>
        <% } %>
      </div>

      <div class="form-group">
        <label for="lname">Last Name</label>
        <input 
          type="text" 
          id="lname" 
          placeholder="Enter your Last Name"
          name="lastName"
          value="<%= values?.lastName || '' %>"
          required />
        <% if (formErrors?.lastName) { %>
          <p class="error"><%= formErrors.lastName %></p>
        <% } %>
      </div>
    </div>

    <!-- Email + Date -->
    <div class="contact-row">
      <div class="form-group">
        <label for="email">Email ID</label>
        <input 
          type="email" 
          id="email" 
          placeholder="Enter your email" 
          name="email"
          value="<%= values?.email || '' %>"
          required />
        <% if (formErrors?.email) { %>
          <p class="error"><%= formErrors.email %></p>
        <% } %>
      </div>

      <div class="form-group">
        <label for="booking-date">Date of Booking</label>
        <input 
          type="date" 
          id="booking-date" 
          name="date"
          value="<%= values?.date || '' %>"
          required />
        <% if (formErrors?.date) { %>
          <p class="error"><%= formErrors.date %></p>
        <% } %>
      </div>
    </div>

    <!-- VIP + Enfant -->
    <div class="ticket-row">
      <div class="form-group">
        <label for="vip">VIP Tickets - 150€</label>
        <input 
          type="number" 
          id="vip" 
          name="vipTicket"
          value="<%= values?.vipTicket || 0 %>"  
          min="0"/>
        <% if (formErrors?.vipTicket) { %>
          <p class="error"><%= formErrors.vipTicket %></p>
        <% } %>
      </div>

      <div class="form-group">
        <label for="enfant">Enfant Tickets - 80€</label>
        <input 
          type="number" 
          id="enfant" 
          name="enfantTicket"
          value="<%= values?.enfantTicket || 0 %>" 
          min="0" />
        <% if (formErrors?.enfantTicket) { %>
          <p class="error"><%= formErrors.enfantTicket %></p>
        <% } %>
      </div>
    </div>

    <!-- Adult + Group -->
    <div class="ticket-row">
      <div class="form-group">
        <label for="adult">Adult Tickets - 100€</label>
        <input 
          type="number" 
          id="adult"
          name="adultTicket" 
          value="<%= values?.adultTicket || 0 %>"
          min="0" />
        <% if (formErrors?.adultTicket) { %>
          <p class="error"><%= formErrors.adultTicket %></p>
        <% } %>
      </div>

      <div class="form-group group-section">
        <label for="group">Group Tickets (Coming Soon)</label>
        <input type="number" id="group" value="0" min="0" disabled placeholder="Coming Soon" />
      </div>
    </div>

    <!-- Final Price -->
    <div class="final-price-row">
      <div class="form-group" style="grid-column: span 2;">
        <p>Total: <span id="totalPrice">0</span> €</p>
        <div id="final-price-box">To confirm your booking please proceed to payment page</div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="form-submit">
      <button type="submit">PAY NOW</button>
      <button onclick="myFunction()">Click me</button>
    </div>

    <% if (submitError) { %>
      <p class="error">An error occurred while saving your booking details. Please try again.</p>
    <% } %>

  </form>
</div>
